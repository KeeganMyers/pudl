"""Add schema for boiler_stack_flue_assn_eia860 table

Revision ID: 96b730f95c3c
Revises: 6e9328b6b275
Create Date: 2023-05-22 15:07:50.002105

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '96b730f95c3c'
down_revision = '6e9328b6b275'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('boiler_stack_flue_assn_eia860',
    sa.Column('report_date', sa.Date(), nullable=False, comment='Date reported.'),
    sa.Column('plant_id_eia', sa.Integer(), nullable=False, comment='The unique six-digit facility identification number, also called an ORISPL, assigned by the Energy Information Administration.'),
    sa.Column('boiler_id', sa.Text(), nullable=False, comment='Alphanumeric boiler ID.'),
    sa.Column('stack_id_eia', sa.Text(), nullable=True, comment='The value EIA uses to identify a stack or chimney on a power plant where emissions from the combustion process are released into the atmosphere.'),
    sa.Column('flue_id_eia', sa.Text(), nullable=True, comment='test'),
    sa.Column('stack_flue_id_eia', sa.Text(), nullable=True, comment='The value EIA uses to identify hybrid stack and flue units. Plants with individual stack and flue IDs do not have a stack_flue_id value.'),
    sa.Column('stack_flue_id_pudl', sa.Text(), nullable=False, comment="The stack_id_eia value and the flue_id_eia value seperated by an underscore. Or the value for stack_flue_id_eia when there is one. Or just the stack_id_eia when there's nothing else. This value is used as the primary key for the boiler_stack_flue_assn_eia860 table and shouldn't necessarily be used to connect the values in this table to those of another."),
    sa.ForeignKeyConstraint(['plant_id_eia', 'boiler_id', 'report_date'], ['boilers_eia860.plant_id_eia', 'boilers_eia860.boiler_id', 'boilers_eia860.report_date'], ),
    sa.PrimaryKeyConstraint('report_date', 'plant_id_eia', 'boiler_id', 'stack_flue_id_pudl')
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('boiler_stack_flue_assn_eia860')
    # ### end Alembic commands ###
